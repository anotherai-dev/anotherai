# Creating Agents with Image Input

## Overview

The goal of this guide is to explain the differences between using images as input instead of text, provide context for why these differences exist, and show you a basic example of an agent with image input 

## The Difference Between Text and Image Inputs

When building agents that take an image as input, images are passed directly in the message content using the `image_url` type, not as input variables. This is because images require special handling in the message format that differs from regular text or JSON inputs.

## Why Images Are Handled Differently

[TODO: explain this better]

Traditional input variables in AnotherAI are designed for text, numbers, and structured data that can be templated into prompts using Jinja2 syntax. For example, you might have `{{ user_name }}` or `{{ email_content }}` in your prompt template.

Images, however, cannot be templated this way because:
[the following is generated by Claude; not sure if it's accurate]
- They are binary data or URLs, not text that can be inserted into a string
- AI models expect images to be provided in a specific format within the message structure
- The models need to know explicitly that they're receiving image data, not text

## Example: Image Description Agent

Let's explore a complete example that shows how to correctly pass images to an agent:

```python
def image_description(image_url: str) -> str:
    res = openai.chat.completions.create(
        model="gpt-4o-mini",
        messages=[
            {
                "role": "system",
                "content": """You are an image description specialist who provides detailed and accurate descriptions of images. Your task is to analyze the provided images and generate a comprehensive description that captures the key elements, context, and details visible in the image(s).

                When multiple images are provided, create a unified description that covers all images. If additional information is provided, use it to inform your description and provide more context-specific details.

                Your description should be:
                - Clear and concise
                - Factual and objective
                - Detailed enough to help someone visualize the image
                - Well-structured and easy to understand""",
            },
            {
                "role": "user",
                "content": [
                    {"type": "image_url", "image_url": {"url": image_url}},
                ],
            },
        ],
    )
    if not res.choices[0].message.content:
        raise ValueError("No image description found")
    return res.choices[0].message.content
```

### Breaking Down Each Part

#### Function Signature
```python
def sassy_image_description(image_url: str) -> str:
```
The function accepts a string parameter `image_url`. This should be either:
- A public URL to an image (e.g., `https://example.com/image.jpg`)
- A base64-encoded data URL (e.g., `data:image/jpeg;base64,/9j/4AAQ...`)

#### System Message
```python
{
    "role": "system",
    "content": "You are a sassy image description generator. You are given an image URL and you need to generate a sassy description of the image.",
}
```
The system message is a regular string, just like in text-only agents. This sets the personality and task for the AI.

#### User Message with Image
```python
{
    "role": "user",
    "content": [
        {"type": "image_url", "image_url": {"url": image_url}},
    ],
}
```
This is where images differ from text inputs:
- `content` is an **array** instead of a string
- Each array element has a `type` field
- For images, use `type: "image_url"`
- The URL is nested: `image_url: {"url": image_url}`

#### Mixing Text and Images

You can combine text and images in the same message:

```python
{
    "role": "user",
    "content": [
        {"type": "text", "text": "How many cats are in the image?"},
        {"type": "image_url", "image_url": {"url": image_url}}
    ],
}
```